open build/Common
open ./etc/Solvuu

PROJECT = phat
OPAM_PACKAGE_NAME = $(PROJECT)
VERSION = dev

PACKAGES(x) =
  switch $(x)
  case pure
    return core_kernel sexplib.syntax
  case unix
    return $(PACKAGES pure) core
  default
    eprintln(PACKAGES undefined for $(x).)
    exit(1)

LIB_DEPS(x) =
  switch $(x)
  case pure
    return $(EMPTY)
  case unix
    return pure
  default
    eprintln(LIB_DEPS undefined for $(x).)
    exit(1)

MerlinFile()
METAFile()
OpamInstallFile(omake/Solvuu.om)
CleanCommands()
CheckErrors()

.SUBDIRS: .
  foreach(x => ..., $(LIBS))
    OCamlLibrary($(x))
